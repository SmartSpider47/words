var content=document.getElementById("id_main_content"),levels=[[],["доху","ход","ухо","дух","уход"],["отрс","сор","рот","рост","сорт","трос","торс"],["нфьте","фен","тень","нефть"],["грано","рог","нора","нога","гора","ранг","горн","аргон","орган"],["нулко","лук","кол","укол","клон","кулон","уклон","клоун","колун"]],level_index=0,svg_width=300,svg_height=300,interval=100,radius=35,writing=!1,chose_list=[],found_list=[],cur_word="",found=0;function _ArrCopy(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t}function _ArrNew(e,t){for(var r=parseInt(e),n=[],l=0;l<r;l++)n.push(t);return n}function _ArrSub(e,t,r){var n=parseInt(t),l=parseInt(r);n<0&&(n=0),l>e.length&&(l=e.length-1);for(var i=[],s=parseInt(n);s<l;s++)i.push(e[s]);return i}function _Str(e){var t="";return t+=e}function _ArrSorted(e){for(var t=_ArrCopy(e),r=0;r<t.length;r++)for(var n=r+1;n<t.length;n++)if(t[r].length==t[n].length&&t[r]>t[n]||t[r].length>t[n].length){var l=_Str(t[r]),i=_Str(t[n]);t[r]=_Str(i),t[n]=_Str(l)}return t}function F_MaxInt(e,t){return parseInt(e)>parseInt(t)?e:t}function MaxLenOf(e){for(var t=-1,r=0;r<e.length;r++)t=F_MaxInt(t,e[r].length);return t}function _StrK(e,t){for(var r="",n=_Str(e),l=parseInt(t),i=0;i<l;i++)r+=n;return r}function WordTR(e,t,r){var n=_Str(e),l=parseInt(t),i='<tr id="id_line_'+r+'">';return i+=_StrK('<td class="css-cell"></td>',n.length),i+=_StrK('<td class="css-cell-empty"></td>',l-n.length),i+="</tr>"}function LetterWordInnerTR(e,t){for(var r=_Str(e),n=parseInt(t),l="",i=0;i<r.length;i++)l+='<td class="css-cell">'+r[i]+"</td>";return l+=_StrK('<td class="css-cell-empty"></td>',n-r.length)}function NextLevel(){var e=_ArrCopy(levels[++level_index]),t=_ArrSorted(_ArrSub(e,1,e.length)),r=_Str(e[0]),n=MaxLenOf(t),l="";l+='<br><center><font id="id_level_title" class="css-level">Level '+level_index+'</font></center><br><br><div class="css-left-div"><table border="0" id="id_main_table">';for(var i=0;i<t.length;i++)l+=WordTR(t[i],n,i);l+='</table></div><div class="css-right-div">',l+='<svg class="css-svg" id="id_draw_content"></svg>',l+='</div><br><p class="css-word" id="id_cur_word" align="center"></p>',content.innerHTML=l,chose_list=_ArrNew(r.length,!1),found_list=_ArrNew(r.length,!1),cur_word="",found=0;var s=document.getElementById("id_draw_content");s.style="width:"+svg_width+";height:"+svg_height+";";var d=parseFloat(svg_width/2),o=parseFloat(svg_height/2),a=360/parseFloat(r.length);for(i=0;i<r.length;i++){var _=a*i/(180/Math.PI),c=Math.sin(_),u=Math.cos(_),h=parseFloat(d)+c*interval,v=parseFloat(o)-u*interval,f=h-11,g=v+8;s.innerHTML+='<text x="'+f+'" y="'+g+'" class="css-letter">'+r[i]+"</text>",s.innerHTML+='<circle id="id_circle_'+i+'" onmousedown="Pressed(\''+i+"', '"+r[i]+"')\" onmouseenter=\"Entered('"+i+"', '"+r[i]+'\')" cx="'+h+'" cy="'+v+'" r="'+radius+'" fill="rgba(255,255,255,0.1)" stroke="aqua" stroke-width="1"></circle>'}$("#id_level_title").hide(),$("#id_level_title").fadeIn(1e3),$("#id_main_table").hide(),$("#id_main_table").fadeIn(1e3),$("#id_draw_content").hide(),$("#id_draw_content").show(1e3)}function UpdateCurWord(){document.getElementById("id_cur_word").innerText=cur_word}function Write(e,t){chose_list[parseInt(e)]=!0,writing=!0,document.getElementById("id_circle_"+e).style.fill="rgba(255,255,255,0.3)",cur_word+=t,UpdateCurWord()}function Pressed(e,t){chose_list[parseInt(e)]||writing||Write(e,t)}function Entered(e,t){!chose_list[parseInt(e)]&&writing&&Write(e,t)}function MouseReleased(){writing=!1;for(var e=0;e<chose_list.length;e++)chose_list[e]&&(chose_list[e]=!1,document.getElementById("id_circle_"+e).style.fill="rgba(255,255,255,0.1)");var t=_ArrCopy(levels[level_index]),r=_ArrSorted(_ArrSub(t,1,t.length));for(e=0;e<r.length;e++)if(r[e]==cur_word&&!found_list[e]){found_list[e]=!0,$("#id_line_"+e).hide(),found++,document.getElementById("id_line_"+e).innerHTML=LetterWordInnerTR(cur_word,MaxLenOf(r)),$("#id_line_"+e).fadeIn(),setTimeout(Check,500);break}cur_word="",UpdateCurWord()}function Check(){found>=levels[level_index].length-1&&(level_index<levels.length-1?NextLevel():LevelsPassed())}function LevelsPassed(){content.innerHTML='<br><center><font class="css-win-text">Congratulations!</font><br><font class="css-win-text">All levels passed!</font></center>'}NextLevel();
